plugins {
    id 'java'
    id 'com.gradleup.shadow' version '9.0.0-beta4'
}

group = 'com.brickmasterhunt'
version = '1.0.0-SNAPSHOT'
description = 'Control module for my REV projects based on the AIRobot project'

java {
    toolchain {
        languageVersion = JavaLanguageVersion.of(17)
    }
    withJavadocJar()
    withSourcesJar()
}

repositories {
    maven {
        url = uri('https://nexus.ailis.de/content/groups/public/')
        // Uncomment if HTTPS is not supported
        // allowInsecureProtocol = true
    }
    mavenCentral()
}

dependencies {
    implementation 'org.usb4java:usb4java:1.3.0'
    implementation 'org.openpnp:opencv:4.9.0-0'
}

tasks.assemble.dependsOn(shadowJar)

tasks.withType(JavaCompile) {
    options.encoding = 'UTF-8'
}

tasks.jar {
    manifest {
        attributes(
                'Main-Class': 'AIRobot.DriverServer'
        )
    }
}